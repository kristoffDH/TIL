# 3. 스트라이드와 슬라이스

## 슬라이스

파이썬에서 시퀀스 자료형에서 일부를 잘라낼 때 슬라이스를 이용한다.&#x20;

`시퀀스객체[시작인덱스:끝인덱스]`

위와 같은 형태로 슬라이스를 사용할 수 있다. 이때 시작 인덱스는 범위에 포함하지만 끝 인덱스는 범위에 포함되지 않는다. 따라서 `list_a[1:4]` 와 같이 슬라이스를 사용할 경우 list\_a의 1번째 요소부터 3(끝 인덱스는 포하 안되기 때문에 하나 전인 3까지)까지 리스트를 슬라이스 하게 된다.

> 시퀀스 자료형
>
> &#x20;\- 문자열: `'Hello'`. 문자열(string)은 문자(character)들의 시퀀스다.
>
> &#x20;\- 리스트: `[1, 4, 5]`.
>
> &#x20;\- 튜플: `('Foo', 100, 490.1)`

또한 슬라이스는  list\_a\[4:-1]과 같이 음수를 인덱스로 지정할 수도 있다.&#x20;

```python
list_a = [0, 10, 20, 30, 40, 50, 60, 70, 80, 90]

# slice 예제 1
list_a[4:7]     # 인덱스 4부터 6까지 요소 3개를 가져옴 
# 출력 : [40, 50, 60]

# slice 예제 2
list_a[4:-1]    # 인덱스 4부터 -2까지 요소 5개를 가져옴 
# 출력 : [40, 50, 60, 70, 80]
```

## 스트라이드

파이썬에서는  시퀀스객체\[start:end:stride] 처럼 슬라이스의 스트라이드 (stride: 간격)를 설정하는 문법도 있다.  이 문법을 이용하면 시퀀스를 슬라이스할 때 n 번째 아이템을 가져올 수 있다.&#x20;

만약 슬라이스를 역순으로 진행 중이면, 스트라이드도 음수를 사용해서 지정할 수 있다.ㅣ

```python
list_a = [0, 10, 20, 30, 40, 50, 60, 70, 80, 90]

# stride 예제
list_a[0:-1:2] # 인덱스 0부터 -2까지 2 간격으로 요소를 가져옴 
# 출력 : [0, 20, 40, 60, 80]

# stride 음수 사용 예제
list_a[-1:0:-2] # 인덱스 -1부터 1번 인덱스까지 2씩 감소하면서 요소를 가져옴 
# 출력 : [90, 70, 50, 30, 10]
```

## 스트라이드 사용시 주의해야할 점&#x20;

### 멀티 바이트로 된 데이터를 스트라이드 사용할 경우 데이터가 깨질 수 있다

스트라이드는 간격을 지정하는 문법이기에 시퀀스 객체가 2 Byte 이상의 묶음으로 데이터를 표현하는 데이터에 사용할 때에는 오작동을 일으킬 수 있다.&#x20;

예를 들어서 UTF-8 로 인코딩된 문자열을 스트라이드 한뒤, 다시 인코딩 하려고하면 데이터가 깨져서 디코딩이 안될 수 있다.

```python
a = "안녕하세요"

# utf-8로 인코딩
enc_a = a.encode("utf-8")
print(enc_a)
# 출력 : b'\xec\x95\x88\xeb\x85\x95\xed\x95\x98\xec\x84\xb8\xec\x9a\x94'

dec_a = enc_a[::2]
print(dec_a.decode("utf-8"))
# Error : UnicodeDecodeError: 'utf-8' codec can't decode bytes in position 6-7: unexpected end of data
```

### 슬라이스를 스트라이드보다 먼저 사용해야 한다

스트라이드의 경우 원본 시퀀스 객체에서 얕은 복사로 데이터를 보여주기 때문에 스트라이드를 먼저 진행한 후, 잘못 사용하면 원본 리스트의 데이터가 변경되거나 없어질 수 있다. 따라서 만약 스트라이드를 사용해야되는 경우가 생긴다면 슬라이스로 시퀀스 객체를 깊은 복사로 만들어 놓고 스트라이드를 진행하는 것이 안전하다.

```python
a = [10, 20, 30, 40, 50, 60]
b = a[::2] # 스트라이드로 짝수번째 데이터만 복사

# 리스트 a와 리스트 b의 첫번째 원소 비교
print(a[0]) # 10
print(b[0]) # 10

# 스트라이드로 인해 얕은 복사되어 주소값이 같음
print(id(a[0])) # 4470020688
print(id(b[0])) # 4470020688
```

## 결론

슬라이스와 스트라이드는 같은 식에 사용하면 에러가 발생해도 찾기가 어려우며 가독성도 떨어지기 때문에 되도록이면 슬라이스를 먼저 진행한 후, 시퀀스를 스트라이드하는 방법으로 진행하는 것이 여러모로 안전하다.
